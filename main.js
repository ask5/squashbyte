(()=>{var e={10:()=>{const e=document.getElementById("canvas"),n=e.getContext("2d"),t=document.getElementById("score"),o=document.getElementById("high"),a=document.getElementById("fault_div"),l=(document.getElementById("elapsed_div"),document.getElementById("squashed_div")),r=(document.getElementById("start"),document.getElementById("start-section-wrapper")),i=document.getElementById("info"),s=(document.getElementById("keypad"),document.getElementById("showlog"),document.getElementById("game-canvas")),c=document.getElementById("logpanel"),d=document.getElementById("display_log"),h=(document.getElementById("about"),document.getElementById("aboutpanel")),g=document.getElementById("settingspanel"),p=document.getElementById("soundtoggle"),u=document.getElementById("toggleSwitchCircle");let m=null===localStorage.getItem("sound")||JSON.parse(localStorage.getItem("sound"));m?(u.style.transform="translateX(100%)",p.style.background="green"):(u.style.transform="translateX(0%)",p.style.background="gray"),p.onclick=function(){m?(m=!1,u.style.transform="translateX(0%)",p.style.background="gray"):(m=!0,u.style.transform="translateX(100%)",p.style.background="green"),localStorage.setItem("sound",m)};let y=new Howl({src:["./sounds/pops.wav"],volume:.2}),f=new Howl({src:["./sounds/dun-dun-dun.mp3"]}),x=new Howl({src:["./sounds/disable.mp3"],volume:.2}),b=new Howl({src:["./sounds/pfff.mp3"],volume:.2}),w=new Howl({src:["./sounds/fanfare.mp3"],volume:.2}),v=new Howl({src:["./sounds/switch-on.mp3"],volume:.2}),k=localStorage.getItem("high"),I=localStorage.getItem("ru"),E=localStorage.getItem("theme"),S=JSON.parse(localStorage.getItem("log")||"[]");k&&(o.innerText="Best Score: "+k),i.style.display="none",I?xe():(fe(),localStorage.setItem("ru",!0));const B=window.devicePixelRatio;let C,M,T,N,P,z,A,H,L,j,D,F,O,R,q,_,J,X,$,U=[];const W={basic:{canvasBackground:"#eeeeee",color0:"#222222",color1:"#222222",explosionColor:["red","yellow","orange","white"]},grass:{canvasBackground:"green",color0:"lightyellow",color1:"lightyellow",explosionColor:["red","yellow","orange","white"]},homebrew:{canvasBackground:"#222",color0:"#39ff14",color1:"#39ff14",explosionColor:["red","yellow","orange","white"]},manpage:{canvasBackground:"#FFFAA0",color0:"#222",color1:"#222",explosionColor:["red","yellow","orange","white"]},ocean:{canvasBackground:"#113366",color0:"#eeeeee",color1:"#eeeeee",explosionColor:["red","yellow","orange","white"]},redsands:{canvasBackground:"#b35656",color0:"#dee0b0",color1:"#dee0b0",explosionColor:["red","yellow","orange","white"]},circles:{canvasBackground:"#444",background0:"#000",background1:"white",color0:"white",color1:"#000",explosionColor:["black","white"]}};function G(){C=[],M=!1,T=0,N=24,P=.4,z=2*N,A=z,U=[],H=null,L=0,j=[],D=[],O=0,R=0,q=E||"circles",_=W[q].explosionColor,J=W[q].color0,X=W[q].color1,e.style.backgroundColor=W[q].canvasBackground,$=0,t.classList.remove("best")}G();let K=[{min:1,max:16,speed:.4},{min:1,max:32,speed:.5},{min:1,max:64,speed:.6},{min:1,max:128,speed:.7},{min:1,max:255,speed:.8}];const Q=e=>e.toString(2).padStart(8,"0").split("");class V{constructor(e,n,t,o,a){this.id=T++,this.x=e,this.y=n,this.decimal=t,this.bits=[],this.radius=a,this.binary=o,this.makeBits(o)}makeBits=function(e){for(const n of e){let e=new Y(this.x,this.y,n,this.radius);this.x=this.x+2*this.radius+1,this.bits.push(e)}};render=function(e){for(const n of this.bits)n.y=this.y,n.render(e)};move=function(e){this.y+=e}}class Y{constructor(e,n,t,o){this.x=e,this.y=n,this.value=t,this.radius=o}render=function(e){"circles"===q&&(e.beginPath(),e.arc(this.x,this.y,this.radius,0,2*Math.PI,!1),e.fillStyle="1"===this.value?W[q].background1:W[q].background0,e.fill(),e.lineWidth=1,e.strokeStyle="1"===this.value?X:J,e.stroke(),e.closePath()),e.fillStyle="1"===this.value?X:J,e.font="24px Helvetica",e.textAlign="center",e.textBaseline="middle",e.fillText(this.value,this.x,this.y)}}const Z=()=>{if(n){n.clearRect(0,0,n.canvas.width,n.canvas.height),O=parseInt((new Date-F)/1e3);let t=(e=>{let n=0;return n=e<=150?0:e<=250?1:e<=500?2:e<=1e3?3:4,n})(L),o=K[t];if((n=>{if(z+=n.speed,z<A)return;z=0;let t=(o=n.min,a=n.max,Math.floor(Math.random()*(a-o+1)+o));var o,a;let l=e.width/(2*B)-7*N-3,r=-N,i=Q(t),s=new V(l,r,t,i,N);C.push(s)})(o),ae(o.speed),H){let e=le(H),n=0;if(e.length>0){ce(e),n=H*e.length;for(const n of e)D.push({d:n.decimal,b:n.binary.join("")})}else n=-5,R++,i.innerText="FOUL!",m&&x.play();L+=n,H=null}ge();let a=window.requestAnimationFrame(Z),l=C[0];l&&l?.y+l?.radius>n.canvas.height/window.devicePixelRatio&&(window.cancelAnimationFrame(a),function(){M=!1,ye(),U=[],r.style.display="block",i.style.display="none",k||(k=0),L>parseInt(k)&&(k=L,localStorage.setItem("high",k.toString()),JSON.parse(localStorage.getItem("log")||"[]").length>0&&m&&w.play()),S.push({d:new Date,t:O,f:R,p:L,s:D.length}),localStorage.setItem("log",JSON.stringify(S));for(const e of C)for(const n of e?.bits)j.push(new he(n.x,n.y,20))}()),ee()}};function ee(){t.innerText=L.toString(),l.innerHTML=D.length,a.innerText=R.toString(),k&&(o.innerText="Best Score: "+k),L>(parseInt(k)||0)&&t.classList.add("best")}const ne=e=>{if(n){let t=e;n.clearRect(0,0,n.canvas.width,n.canvas.height),te(t,"white")}};function te(e,t){n.fillStyle=t,n.font="40px monospace",n.textAlign="center",n.textBaseline="middle",n.fillText(e,n.canvas.width/window.devicePixelRatio/2-e.length/2,n.canvas.height/window.devicePixelRatio/2)}const oe=()=>{n.clearRect(0,0,n.canvas.width,n.canvas.height),te("Squash Byte","rgba(255, 255, 255, "+$+")"),$+=.05,ge();let e=window.requestAnimationFrame(oe);j.length<=0&&(window.cancelAnimationFrame(e),me(-1))},ae=e=>{for(const t of C)t.move(e),t.render(n)},le=e=>{let n=[];for(const[t,o]of C.entries())o.decimal===e&&o.y+o.radius>0&&(n.push(o),m&&y.play(),re(o),se(t));return n},re=e=>{let n=e?.bits;if(n)for(const e of n)ie(e.x,e.y,e.radius),j.push(new he(e.x,e.y,10))};function ie(e,t,o){for(var a=0;a<Math.round(Math.PI*o);a++){var l=a/Math.round(Math.PI*o)*360;n.clearRect(e,t,Math.sin(l*(Math.PI/180))*o,Math.cos(l*(Math.PI/180))*o)}}const se=e=>{for(let t=e;t>=0;t--){let e=C[t];e.y=e.y-2*e.radius,e.render(n)}},ce=e=>{C=C.filter((n=>!e.find((({id:e})=>n.id===e))))};(e=>{const n=e.canvas;n&&(n.width=Math.floor(400*B),n.height=Math.floor(400*B),e.scale(B,B))})(n);class de{constructor(e,n){this.x=e,this.y=n,this.xv=this.rand(1,5,!1),this.yv=this.rand(1,5,!1),this.size=this.rand(1,4,!0),this.r=this.rand(113,222),this.g="00",this.b=this.rand(105,255)}rand(e,n,t){let o;return!1===t?(o=Math.floor(Math.random()*n)-e,o*=1===Math.floor(2*Math.random())?1:-1):o=Math.floor(Math.random()*n)+e,o}}class he{constructor(e,n,t){this.particles=[],this.x=e,this.y=n;for(let o=0;o<t;o++)this.particles.push(new de(e,n))}}function ge(){if(0!==j.length)for(let e=0;e<j.length;e++){const t=j[e],o=t.particles;if(0===o.length)return void j.splice(e,1);const a=o.slice();for(let e=0;e<o.length;e++){const t=o[e];t.size<=0?a.splice(e,1):(n.beginPath(),n.arc(t.x,t.y,t.size,2*Math.PI,0,!1),n.closePath(),n.fillStyle=_[Math.floor(Math.random()*_.length)],n.fill(),t.x+=t.xv,t.y+=t.yv,t.size-=.1)}t.particles=a}}const pe=e=>{H=parseInt(e)};function ue(e){return new Promise((n=>setTimeout(n,e)))}function me(e){G(),ee(),async function(e){for(let n=e;n>=-1;n--){let e=n<=0?"Squash Byte":n.toString();ne(e),0===n&&m&&f.play(),await ue(1e3)}}(e).then((()=>{M=!0,F=new Date,Z()}))}function ye(){Array.from(document.querySelectorAll(".key-pad-button")).forEach((e=>{e.classList.remove("clicked")})),i.innerText=""}function fe(){s.style.display="none",h.style.display="block"}function xe(){s.style.display="block",h.style.display="none"}window.addEventListener("keydown",(e=>{const n=/^[0-9]$/i.test(e.key);m&&"Enter"!=e.key&&v.play(),M&&(n&&U.length<3&&U.push(e.key),"Enter"===e.key&&(U.length>0&&pe(U.join("")),U=[]),"Delete"!==e.key&&"Backspace"!==e.key||U.pop(),i.innerText=U.join(""))}),!0),document.addEventListener("input",(function(t){"themes"===t.target.id&&(q=t.target.value,(t=>{_=W[t].explosionColor,J=W[t].color0,X=W[t].color1,e.style.backgroundColor=W[t].canvasBackground,n.clearRect(0,0,n.canvas.width,n.canvas.height);let o=e.width/(2*B)-7*N-3,a=2*N,l=Q(85);new V(o,a,85,l,N).render(n),localStorage.setItem("theme",t)})(q))}),!1),document.addEventListener("click",(function(e){if(M&&e.target.classList.contains("key-pad-button")||"key-pad-button-submit"===e.target.className){let n=e.target.value;m&&"submit"!=n&&v.play(),/^[0-9]$/i.test(n)&&U.length<3&&U.push(n),"submit"===n&&(U.length>0&&pe(U.join("")),U=[]),"clear"===n&&U.pop(),i.innerText=U.join("")}M||"start"!==e.target.id||(ye(),r.style.display="none",i.style.display="block",j.length>0?(m&&b.play(),oe()):me(3)),M||"showlog"!==e.target.id||function(){s.style.display="none",c.style.display="block",d.replaceChildren();let e=JSON.parse(localStorage.getItem("log")||"[]");if(e.length>0){let n=document.createElement("table"),t=document.createElement("tr"),o=document.createElement("th");o.innerText="#",o.className="left-align",t.appendChild(o);let a=document.createElement("th");a.innerText="Date",a.className="left-align",t.appendChild(a);let l=document.createElement("th");l.className="right-align",l.innerText="Duration",t.appendChild(l);let r=document.createElement("th");r.className="right-align",r.innerText="Squashes",t.appendChild(r);let i=document.createElement("th");i.className="right-align",i.innerText="Fouls",t.appendChild(i);let s=document.createElement("th");s.className="right-align",s.innerText="Score",t.appendChild(s),n.appendChild(t);let c=1;for(const t of e){let e=document.createElement("tr");t.p===(parseInt(k)||0)&&(e.className="high-score-row");let o=document.createElement("td");o.innerText=c.toString(),c++,e.appendChild(o);let a=document.createElement("td");const l=new Date(t.d);let r=l.toLocaleDateString("en",{year:"2-digit"}),i=l.getMonth()+"/"+l.getDate()+"/"+r+" "+("0"+l.getHours()).slice(-2)+":"+("0"+l.getMinutes()).slice(-2);a.innerText=i,e.appendChild(a);let s=document.createElement("td");s.className="right-align",s.innerText=t.t,e.appendChild(s);let d=document.createElement("td");d.className="right-align",d.innerText=t?.s,e.appendChild(d);let h=document.createElement("td");h.className="right-align",h.innerText=t.f,e.appendChild(h);let g=document.createElement("td");g.className="right-align",g.innerText=t.p,e.appendChild(g),n.appendChild(e)}d.appendChild(n)}else{let e=document.createElement("div");e.innerHTML="empty",d.appendChild(e)}}(),M||"about"!==e.target.id||fe(),"closeabout"===e.target.id&&xe(),M||"settings"!==e.target.id||(s.style.display="none",g.style.display="block"),"closesettings"===e.target.id&&(s.style.display="block",g.style.display="none"),"back"===e.target.id&&(s.style.display="block",c.style.display="none")}),!1)},314:(e,n,t)=>{"use strict";var o=t(81),a=t.n(o),l=t(645);t.n(l)()(a()).push([e.id,'body {\n  font-family: "Courier New", Courier, monospace;\n}\n\nh2 {\n  text-align: center;\n  margin-bottom: 0;\n  margin-top: 10px;\n}\n\n* {\n  touch-action: manipulation;\n}\n\n.container {\n  max-width: 500px;\n  margin: auto;\n}\n\nmain {\n  border: 1px solid #222;\n  border-radius: 4px;\n  padding: 10px;\n  background-color: beige;\n  color: #222;\n}\n\n.canvas {\n  width: 100%;\n}\n\n.start-section {\n  margin-top: 8px;\n  display: grid;\n  gap: 4px;\n  grid-template-columns: repeat(8, 1fr);\n}\n.start-section-item {\n  font-size: 22px;\n  border-radius: 4px;\n  text-transform: uppercase;\n}\n\n#start {\n  background-color: darkred;\n  color: white;\n  width: 100%;\n  grid-column: span 5;\n}\n\n#settings,\n#showlog,\n#about {\n  background-color: transparent;\n  color: #222;\n}\n\n.score-card {\n  display: grid;\n  grid-template-columns: 1.3fr 1fr 1fr;\n  text-transform: lowercase;\n  background-color: #222;\n  color: white;\n  padding: 4px;\n  border-radius: 4px;\n  font-size: 14px;\n  align-items: center;\n  text-transform: capitalize;\n}\n\n.score-card-item {\n  display: flex;\n  gap: 1px;\n  align-items: center;\n}\n\n.flex-grow {\n  flex-grow: 1;\n}\n\n.input-button {\n  gap: 4px;\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n}\n\n.key-pad {\n  width: 100%;\n  margin: auto;\n  margin-top: 8px;\n}\n\n.key-pad-button {\n  height: 45px;\n  line-height: 45px;\n  border-radius: 4px;\n  background-color: #222;\n  color: white;\n  font-size: 32px;\n}\n\n.key-pad-button.hex {\n  background-color: lightseagreen;\n  color: #222;\n}\n\n#info {\n  color: #222;\n  font-weight: 600;\n  text-align: center;\n  margin-top: 8px;\n  font-size: 22px;\n  line-height: 28px;\n  height: 28px;\n  border-radius: 4px;\n  border: 1px solid #222;\n}\n\n.key-pad-button.submit {\n  background-color: darkgreen;\n}\n\n.hidden {\n  display: none;\n}\n\nbutton {\n  border: none;\n  box-shadow: none;\n}\n\n.clicked {\n  background-color: #666;\n}\n\n.log-header,\n.help-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  border-bottom: 1px double #222;\n  margin-bottom: 10px;\n  padding-bottom: 4px;\n}\n\n#back,\n#closeabout,\n#closesettings {\n  background-color: darkred;\n  color: white;\n  height: 25px;\n  line-height: 25px;\n  font-size: 20px;\n  border-radius: 4px;\n}\n#logpanel {\n  min-height: 500px;\n  font-size: 12px;\n  font-family: Arial, Helvetica, sans-serif;\n  color: black;\n}\n\n#aboutpanel {\n  font-size: 18px;\n  font-family: Arial, Helvetica, sans-serif;\n  color: black;\n}\n\ntable {\n  width: 100%;\n  border-collapse: collapse;\n}\n\ntable,\ntr,\nth,\ntd {\n  border: 1px solid #222;\n  padding: 4px;\n}\n\n.left-align {\n  text-align: left;\n}\n.right-align {\n  text-align: right;\n}\n\n.high-score-row {\n  color: firebrick;\n}\n\n.best {\n  color: gold;\n}\n\n.binarytable {\n  border: 0;\n  background-color: lightgrey;\n}\n\n.binarytable tr,\n.binarytable th,\n.binarytable td {\n  border: 0;\n}\n\n.ball {\n  border-radius: 50%;\n  width: 25px;\n  height: 25px;\n  background-color: #222;\n  border: 1px solid white;\n  color: white;\n  margin: auto;\n  font-size: 14px;\n  line-height: 25px;\n}\n\n.ball.one {\n  background-color: white;\n  border: 1px solid #222;\n  color: #222;\n}\n\n.binarytable td {\n  width: 50px;\n  text-align: center;\n}\n\n.binarytable td.highlight {\n  background-color: silver;\n}\n\n.toggleButton {\n  width: 84px;\n  min-width: 84px;\n  display: block;\n  border: 1px black solid;\n  border-radius: 30px;\n  transition: 0.5s;\n}\n.toggleSwitchCircle {\n  display: block;\n  width: 40px;\n  height: 40px;\n  border: 1px black solid;\n  background-color: white;\n  border-radius: 50%;\n  transition: 0.5s;\n}\n\n.settingsbody {\n  display: flex;\n  gap: 5px;\n  align-items: center;\n}\n',""])},645:e=>{"use strict";e.exports=function(e){var n=[];return n.toString=function(){return this.map((function(n){var t="",o=void 0!==n[5];return n[4]&&(t+="@supports (".concat(n[4],") {")),n[2]&&(t+="@media ".concat(n[2]," {")),o&&(t+="@layer".concat(n[5].length>0?" ".concat(n[5]):""," {")),t+=e(n),o&&(t+="}"),n[2]&&(t+="}"),n[4]&&(t+="}"),t})).join("")},n.i=function(e,t,o,a,l){"string"==typeof e&&(e=[[null,e,void 0]]);var r={};if(o)for(var i=0;i<this.length;i++){var s=this[i][0];null!=s&&(r[s]=!0)}for(var c=0;c<e.length;c++){var d=[].concat(e[c]);o&&r[d[0]]||(void 0!==l&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=l),t&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=t):d[2]=t),a&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=a):d[4]="".concat(a)),n.push(d))}},n}},81:e=>{"use strict";e.exports=function(e){return e[1]}}},n={};function t(o){var a=n[o];if(void 0!==a)return a.exports;var l=n[o]={id:o,exports:{}};return e[o](l,l.exports,t),l.exports}t.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return t.d(n,{a:n}),n},t.d=(e,n)=>{for(var o in n)t.o(n,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:n[o]})},t.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),t(10),t(314)})();