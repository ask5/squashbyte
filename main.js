(()=>{var e={10:()=>{const e=document.getElementById("canvas"),n=e.getContext("2d"),t=document.getElementById("score"),o=document.getElementById("high"),a=document.getElementById("fault_div"),i=(document.getElementById("elapsed_div"),document.getElementById("squashed_div")),r=document.getElementById("start"),l=document.getElementById("start-section-wrapper"),s=document.getElementById("info"),c=(document.getElementById("keypad"),document.getElementById("showlog"),document.getElementById("game-canvas")),d=document.getElementById("logpanel"),h=document.getElementById("display_log"),g=(document.getElementById("about"),document.getElementById("aboutpanel"));let p=localStorage.getItem("high"),u=localStorage.getItem("ru"),m=localStorage.getItem("theme"),f=JSON.parse(localStorage.getItem("log")||"[]");p&&(o.innerText="Best Score: "+p),s.style.display="none",u?ce():(se(),localStorage.setItem("ru",!0));const x=window.devicePixelRatio;let y,b,w,v,k,I,E,B,S,C,M,T,N,P,A,z,F,L,j,D=[];const R={basic:{canvasBackground:"#eeeeee",color0:"#222222",color1:"#222222",explosionColor:["red","yellow","orange","white"]},grass:{canvasBackground:"green",color0:"lightyellow",color1:"lightyellow",explosionColor:["red","yellow","orange","white"]},homebrew:{canvasBackground:"#222",color0:"#39ff14",color1:"#39ff14",explosionColor:["red","yellow","orange","white"]},manpage:{canvasBackground:"#FFFAA0",color0:"#222",color1:"#222",explosionColor:["red","yellow","orange","white"]},ocean:{canvasBackground:"#113366",color0:"#eeeeee",color1:"#eeeeee",explosionColor:["red","yellow","orange","white"]},redsands:{canvasBackground:"#b35656",color0:"#dee0b0",color1:"#dee0b0",explosionColor:["red","yellow","orange","white"]},circles:{canvasBackground:"#444",background0:"#000",background1:"white",color0:"white",color1:"#000",explosionColor:["black","white"]}};function q(){y=[],b=!1,w=0,v=24,k=.4,I=2*v,E=I,D=[],B=null,S=0,C=[],M=[],N=0,P=0,A=m||"circles",z=R[A].explosionColor,F=R[A].color0,L=R[A].color1,e.style.backgroundColor=R[A].canvasBackground,j=0,t.classList.remove("best")}q();let O=[{min:1,max:16,speed:.4},{min:1,max:32,speed:.5},{min:1,max:64,speed:.6},{min:1,max:128,speed:.7},{min:1,max:255,speed:.8}];const H=e=>e.toString(2).padStart(8,"0").split("");class _{constructor(e,n,t,o,a){this.id=w++,this.x=e,this.y=n,this.decimal=t,this.bits=[],this.radius=a,this.binary=o,this.makeBits(o)}makeBits=function(e){for(const n of e){let e=new J(this.x,this.y,n,this.radius);this.x=this.x+2*this.radius+1,this.bits.push(e)}};render=function(e){for(const n of this.bits)n.y=this.y,n.render(e)};move=function(e){this.y+=e}}class J{constructor(e,n,t,o){this.x=e,this.y=n,this.value=t,this.radius=o}render=function(e){"circles"===A&&(e.beginPath(),e.arc(this.x,this.y,this.radius,0,2*Math.PI,!1),e.fillStyle="1"===this.value?R[A].background1:R[A].background0,e.fill(),e.lineWidth=1,e.strokeStyle="1"===this.value?L:F,e.stroke(),e.closePath()),e.fillStyle="1"===this.value?L:F,e.font="24px Helvetica",e.textAlign="center",e.textBaseline="middle",e.fillText(this.value,this.x,this.y)}}const $=()=>{if(n){n.clearRect(0,0,n.canvas.width,n.canvas.height),N=parseInt((new Date-T)/1e3);let t=(e=>{let n=0;return n=e<=150?0:e<=250?1:e<=500?2:e<=1e3?3:4,n})(S),o=O[t];if((n=>{if(I+=n.speed,I<E)return;I=0;let t=(o=n.min,a=n.max,Math.floor(Math.random()*(a-o+1)+o));var o,a;let i=e.width/(2*x)-7*v-3,r=-v,l=H(t),s=new _(i,r,t,l,v);y.push(s)})(o),Q(o.speed),B){let e=V(B),n=0;if(e.length>0){ee(e),n=B*e.length;for(const n of e)M.push({d:n.decimal,b:n.binary.join("")})}else n=-5,P++,s.innerText="FOUL!";S+=n,B=null}oe();let a=window.requestAnimationFrame($),i=y[0];i&&i?.y+i?.radius>n.canvas.height/window.devicePixelRatio&&(window.cancelAnimationFrame(a),function(){b=!1,le(),D=[],r.innerText="Try Again",l.style.display="block",s.style.display="none",p||(p=0),S>parseInt(p)&&(p=S,localStorage.setItem("high",p.toString())),f.push({d:new Date,t:N,f:P,p:S,s:M.length}),localStorage.setItem("log",JSON.stringify(f));for(const e of y)for(const n of e?.bits)C.push(new te(n.x,n.y,20))}()),U()}};function U(){t.innerText=S.toString(),i.innerHTML=M.length,a.innerText=P.toString(),p&&(o.innerText="Best Score: "+p),S>(parseInt(p)||0)&&t.classList.add("best")}const W=e=>{if(n){let t=e;n.clearRect(0,0,n.canvas.width,n.canvas.height),G(t,"white")}};function G(e,t){n.fillStyle=t,n.font="40px monospace",n.textAlign="center",n.textBaseline="middle",n.fillText(e,n.canvas.width/window.devicePixelRatio/2-e.length/2,n.canvas.height/window.devicePixelRatio/2)}const K=()=>{n.clearRect(0,0,n.canvas.width,n.canvas.height),G("Squash Byte","rgba(255, 255, 255, "+j+")"),j+=.05,oe();let e=window.requestAnimationFrame(K);C.length<=0&&(window.cancelAnimationFrame(e),re(-1))},Q=e=>{for(const t of y)t.move(e),t.render(n)},V=e=>{let n=[];for(const[t,o]of y.entries())o.decimal===e&&o.y+o.radius>0&&(n.push(o),X(o),Z(t));return n},X=e=>{let n=e?.bits;if(n)for(const e of n)Y(e.x,e.y,e.radius),C.push(new te(e.x,e.y,10))};function Y(e,t,o){for(var a=0;a<Math.round(Math.PI*o);a++){var i=a/Math.round(Math.PI*o)*360;n.clearRect(e,t,Math.sin(i*(Math.PI/180))*o,Math.cos(i*(Math.PI/180))*o)}}const Z=e=>{for(let t=e;t>=0;t--){let e=y[t];e.y=e.y-2*e.radius,e.render(n)}},ee=e=>{y=y.filter((n=>!e.find((({id:e})=>n.id===e))))};(e=>{const n=e.canvas;n&&(n.width=Math.floor(400*x),n.height=Math.floor(400*x),e.scale(x,x))})(n);class ne{constructor(e,n){this.x=e,this.y=n,this.xv=this.rand(1,5,!1),this.yv=this.rand(1,5,!1),this.size=this.rand(1,4,!0),this.r=this.rand(113,222),this.g="00",this.b=this.rand(105,255)}rand(e,n,t){let o;return!1===t?(o=Math.floor(Math.random()*n)-e,o*=1===Math.floor(2*Math.random())?1:-1):o=Math.floor(Math.random()*n)+e,o}}class te{constructor(e,n,t){this.particles=[],this.x=e,this.y=n;for(let o=0;o<t;o++)this.particles.push(new ne(e,n))}}function oe(){if(0!==C.length)for(let e=0;e<C.length;e++){const t=C[e],o=t.particles;if(0===o.length)return void C.splice(e,1);const a=o.slice();for(let e=0;e<o.length;e++){const t=o[e];t.size<=0?a.splice(e,1):(n.beginPath(),n.arc(t.x,t.y,t.size,2*Math.PI,0,!1),n.closePath(),n.fillStyle=z[Math.floor(Math.random()*z.length)],n.fill(),t.x+=t.xv,t.y+=t.yv,t.size-=.1)}t.particles=a}}const ae=e=>{let n=isNaN(e)?2:3,t=!!isNaN(e)||parseInt(e)<=255;e.length<=n&&t&&(B=isNaN(e)?parseInt(e,16):parseInt(e))};function ie(e){return new Promise((n=>setTimeout(n,e)))}function re(e){q(),U(),async function(e){for(let n=e;n>=-1;n--){let e=n<=0?"Squash Byte":n.toString();W(e),await ie(1e3)}}(e).then((()=>{b=!0,T=new Date,$()}))}function le(){Array.from(document.querySelectorAll(".key-pad-button")).forEach((e=>{e.classList.remove("clicked")})),s.innerText=""}function se(){c.style.display="none",g.style.display="block"}function ce(){c.style.display="block",g.style.display="none"}window.addEventListener("keydown",(e=>{const n=/^[a-fA-F0-9]$/i.test(e.key);b&&(n&&D.length<4&&D.push(e.key),"Enter"===e.key&&(D.length>0&&ae(D.join("")),D=[]),"Delete"!==e.key&&"Backspace"!==e.key||D.pop(),s.innerText=D.join(""))}),!0),document.addEventListener("input",(function(t){"themes"===t.target.id&&(A=t.target.value,(t=>{z=R[t].explosionColor,F=R[t].color0,L=R[t].color1,e.style.backgroundColor=R[t].canvasBackground,n.clearRect(0,0,n.canvas.width,n.canvas.height);let o=e.width/(2*x)-7*v-3,a=2*v,i=H(85);new _(o,a,85,i,v).render(n),localStorage.setItem("theme",t)})(A))}),!1),document.addEventListener("click",(function(e){if(b&&e.target.classList.contains("key-pad-button")||"key-pad-button-submit"===e.target.className){let n=e.target.value;/^[a-fA-F0-9]$/i.test(n)&&D.length<4&&D.push(n),"submit"===n&&(D.length>0&&ae(D.join("")),D=[]),"clear"===n&&D.pop(),s.innerText=D.join("")}b||"start"!==e.target.id||(le(),l.style.display="none",s.style.display="block",C.length>0?K():re(3)),b||"showlog"!==e.target.id||function(){c.style.display="none",d.style.display="block",h.replaceChildren();let e=JSON.parse(localStorage.getItem("log")||"[]");if(e.length>0){let n=document.createElement("table"),t=document.createElement("tr"),o=document.createElement("th");o.innerText="#",o.className="left-align",t.appendChild(o);let a=document.createElement("th");a.innerText="Date",a.className="left-align",t.appendChild(a);let i=document.createElement("th");i.className="right-align",i.innerText="Duration",t.appendChild(i);let r=document.createElement("th");r.className="right-align",r.innerText="Squashes",t.appendChild(r);let l=document.createElement("th");l.className="right-align",l.innerText="Fouls",t.appendChild(l);let s=document.createElement("th");s.className="right-align",s.innerText="Score",t.appendChild(s),n.appendChild(t);let c=1;for(const t of e){let e=document.createElement("tr");t.p===(parseInt(p)||0)&&(e.className="high-score-row");let o=document.createElement("td");o.innerText=c.toString(),c++,e.appendChild(o);let a=document.createElement("td");const i=new Date(t.d);let r=i.toLocaleDateString("en",{year:"2-digit"}),l=i.getMonth()+"/"+i.getDate()+"/"+r+" "+("0"+i.getHours()).slice(-2)+":"+("0"+i.getMinutes()).slice(-2);a.innerText=l,e.appendChild(a);let s=document.createElement("td");s.className="right-align",s.innerText=t.t,e.appendChild(s);let d=document.createElement("td");d.className="right-align",d.innerText=t?.s,e.appendChild(d);let h=document.createElement("td");h.className="right-align",h.innerText=t.f,e.appendChild(h);let g=document.createElement("td");g.className="right-align",g.innerText=t.p,e.appendChild(g),n.appendChild(e)}h.appendChild(n)}else{let e=document.createElement("div");e.innerHTML="empty",h.appendChild(e)}}(),b||"about"!==e.target.id||se(),"closeabout"===e.target.id&&ce(),"back"===e.target.id&&(c.style.display="block",d.style.display="none")}),!1)},314:(e,n,t)=>{"use strict";var o=t(81),a=t.n(o),i=t(645);t.n(i)()(a()).push([e.id,'body {\n  font-family: "Courier New", Courier, monospace;\n}\n\nh2 {\n  text-align: center;\n  margin-bottom: 0;\n  margin-top: 10px;\n}\n\n* {\n  touch-action: manipulation;\n}\n\n.container {\n  max-width: 500px;\n  margin: auto;\n}\n\nmain {\n  border: 1px solid #222;\n  border-radius: 4px;\n  padding: 10px;\n  background-color: beige;\n  color: #222;\n}\n\n.canvas {\n  width: 100%;\n}\n\n.start-section {\n  margin-top: 8px;\n  display: grid;\n  gap: 4px;\n  grid-template-columns: repeat(6, 1fr);\n}\n.start-section-item {\n  font-size: 22px;\n  border-radius: 4px;\n  text-transform: uppercase;\n}\n\n#start {\n  background-color: darkred;\n  color: white;\n  width: 100%;\n  grid-column: span 4;\n}\n\n#showlog,\n#about {\n  background-color: cadetblue;\n  color: #222;\n}\n\n.score-card {\n  display: grid;\n  grid-template-columns: 1.3fr 1fr 1fr;\n  text-transform: lowercase;\n  background-color: #222;\n  color: white;\n  padding: 4px;\n  border-radius: 4px;\n  font-size: 14px;\n  align-items: center;\n  text-transform: capitalize;\n}\n\n.score-card-item {\n  display: flex;\n  gap: 1px;\n  align-items: center;\n}\n\n.flex-grow {\n  flex-grow: 1;\n}\n\n.input-button {\n  gap: 4px;\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n}\n\n.key-pad {\n  width: 100%;\n  margin: auto;\n  margin-top: 8px;\n}\n\n.key-pad-button {\n  height: 45px;\n  line-height: 45px;\n  border-radius: 4px;\n  background-color: #222;\n  color: white;\n  font-size: 32px;\n}\n\n.key-pad-button.hex {\n  background-color: lightseagreen;\n  color: #222;\n}\n\n#info {\n  color: #222;\n  font-weight: 600;\n  text-align: center;\n  margin-top: 8px;\n  font-size: 22px;\n  line-height: 28px;\n  height: 28px;\n  border-radius: 4px;\n  border: 1px solid #222;\n}\n\n.key-pad-button.submit {\n  background-color: darkgreen;\n}\n\n.hidden {\n  display: none;\n}\n\nbutton {\n  border: none;\n  box-shadow: none;\n}\n\n.clicked {\n  background-color: #666;\n}\n\n.log-header,\n.help-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  border-bottom: 1px double #222;\n  margin-bottom: 10px;\n  padding-bottom: 4px;\n}\n\n#back,\n#closeabout {\n  background-color: darkred;\n  color: white;\n  height: 25px;\n  line-height: 25px;\n  font-size: 20px;\n  border-radius: 4px;\n}\n#logpanel {\n  min-height: 500px;\n  font-size: 12px;\n  font-family: Arial, Helvetica, sans-serif;\n  color: black;\n}\n\n#aboutpanel {\n  font-size: 18px;\n  font-family: Arial, Helvetica, sans-serif;\n  color: black;\n}\n\ntable {\n  width: 100%;\n  border-collapse: collapse;\n}\n\ntable,\ntr,\nth,\ntd {\n  border: 1px solid #222;\n  padding: 4px;\n}\n\n.left-align {\n  text-align: left;\n}\n.right-align {\n  text-align: right;\n}\n\n.high-score-row {\n  color: firebrick;\n}\n\n.best {\n  color: gold;\n}\n\n.binarytable {\n  border: 0;\n  background-color: lightgrey;\n}\n\n.binarytable tr,\n.binarytable th,\n.binarytable td {\n  border: 0;\n}\n\n.ball {\n  border-radius: 50%;\n  width: 25px;\n  height: 25px;\n  background-color: #222;\n  border: 1px solid white;\n  color: white;\n  margin: auto;\n  font-size: 14px;\n  line-height: 25px;\n}\n\n.ball.one {\n  background-color: white;\n  border: 1px solid #222;\n  color: #222;\n}\n\n.binarytable td {\n  width: 50px;\n  text-align: center;\n}\n\n.binarytable td.highlight {\n  background-color: silver;\n}\n',""])},645:e=>{"use strict";e.exports=function(e){var n=[];return n.toString=function(){return this.map((function(n){var t="",o=void 0!==n[5];return n[4]&&(t+="@supports (".concat(n[4],") {")),n[2]&&(t+="@media ".concat(n[2]," {")),o&&(t+="@layer".concat(n[5].length>0?" ".concat(n[5]):""," {")),t+=e(n),o&&(t+="}"),n[2]&&(t+="}"),n[4]&&(t+="}"),t})).join("")},n.i=function(e,t,o,a,i){"string"==typeof e&&(e=[[null,e,void 0]]);var r={};if(o)for(var l=0;l<this.length;l++){var s=this[l][0];null!=s&&(r[s]=!0)}for(var c=0;c<e.length;c++){var d=[].concat(e[c]);o&&r[d[0]]||(void 0!==i&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=i),t&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=t):d[2]=t),a&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=a):d[4]="".concat(a)),n.push(d))}},n}},81:e=>{"use strict";e.exports=function(e){return e[1]}}},n={};function t(o){var a=n[o];if(void 0!==a)return a.exports;var i=n[o]={id:o,exports:{}};return e[o](i,i.exports,t),i.exports}t.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return t.d(n,{a:n}),n},t.d=(e,n)=>{for(var o in n)t.o(n,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:n[o]})},t.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),t(10),t(314)})();